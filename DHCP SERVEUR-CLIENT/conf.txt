     Skip to primary navigation
    Skip to main content
    Skip to primary sidebar
    Skip to footer navigation

The Geek Diary

    OS
        Linux
        CentOS/RHEL
        Solaris
        Oracle Linux
        VCS
    Interview Questions
    Database
        oracle
        oracle 12c
        ASM
        mysql
        MariaDB
    DevOps
        Docker
        Shell Scripting
    Big Data
        Hadoop
        Cloudera
        Hortonworks HDP

DHCP configuration file /etc/dhcp/dhcpd.conf explained

by admin

The main DHCP configuration file is /etc/dhcp/dhcpd.conf. The file is used to store the network configuration information required by DHCP clients. There is also a sample configuration file at /usr/share/doc/dhcp-[version]/dhcpd.conf.sample.

# cat /usr/share/doc/dhcp*/dhcpd.conf.sample
# dhcpd.conf
#
# Sample configuration file for ISC dhcpd
#

# option definitions common to all supported networks...
option domain-name "example.org";
option domain-name-servers ns1.example.org, ns2.example.org;

default-lease-time 600;
max-lease-time 7200;

# Use this to enble / disable dynamic dns updates globally.
#ddns-update-style none;

# If this DHCP server is the official DHCP server for the local
# network, the authoritative directive should be uncommented.
#authoritative;

# Use this to send dhcp log messages to a different log file (you also
# have to hack syslog.conf to complete the redirection).
log-facility local7;

# No service will be given on this subnet, but declaring it helps the
# DHCP server to understand the network topology.

subnet 10.152.187.0 netmask 255.255.255.0 {
}

# This is a very basic subnet declaration.

subnet 10.254.239.0 netmask 255.255.255.224 {
  range 10.254.239.10 10.254.239.20;
  option routers rtr-239-0-1.example.org, rtr-239-0-2.example.org;
}

# This declaration allows BOOTP clients to get dynamic addresses,
# which we don't really recommend.

subnet 10.254.239.32 netmask 255.255.255.224 {
  range dynamic-bootp 10.254.239.40 10.254.239.60;
  option broadcast-address 10.254.239.31;
  option routers rtr-239-32-1.example.org;
}

# A slightly different configuration for an internal subnet.
subnet 10.5.5.0 netmask 255.255.255.224 {
  range 10.5.5.26 10.5.5.30;
  option domain-name-servers ns1.internal.example.org;
  option domain-name "internal.example.org";
  option routers 10.5.5.1;
  option broadcast-address 10.5.5.31;
  default-lease-time 600;
  max-lease-time 7200;
}

# Hosts which require special configuration options can be listed in
# host statements.   If no address is specified, the address will be
# allocated dynamically (if possible), but the host-specific information
# will still come from the host declaration.

host passacaglia {
  hardware ethernet 0:0:c0:5d:bd:95;
  filename "vmunix.passacaglia";
  server-name "toccata.fugue.com";
}

# Fixed IP addresses can also be specified for hosts.   These addresses
# should not also be listed as being available for dynamic assignment.
# Hosts for which fixed IP addresses have been specified can boot using
# BOOTP or DHCP.   Hosts for which no fixed address is specified can only
# be booted with DHCP, unless there is an address range on the subnet
# to which a BOOTP client is connected which has the dynamic-bootp flag
# set.
host fantasia {
  hardware ethernet 08:00:07:26:c0:a5;
  fixed-address fantasia.fugue.com;
}

# You can declare a class of clients and then do address allocation
# based on that.   The example below shows a case where all clients
# in a certain class get addresses on the 10.17.224/24 subnet, and all
# other clients get addresses on the 10.0.29/24 subnet.

class "foo" {
  match if substring (option vendor-class-identifier, 0, 4) = "SUNW";
}

shared-network 224-29 {
  subnet 10.17.224.0 netmask 255.255.255.0 {
    option routers rtr-224.example.org;
  }
  subnet 10.0.29.0 netmask 255.255.255.0 {
    option routers rtr-29.example.org;
  }
  pool {
    allow members of "foo";
    range 10.17.224.10 10.17.224.250;
  }
  pool {
    deny members of "foo";
    range 10.0.29.10 10.0.29.230;
  }
}

Configuration parameters
1. options

Information is the options line is sent to each client when it requests a lease. For example, in sample configuration file above, subnet-mask, broadcast-address, DNS server IP address and domain name are sent to each client. Each option declaration is terminated by a semicolon (;).
2. Lease times

There are time related entries in the configuration file.

    default-lease-time : number of seconds the lease remains valid if the client requesting the lease do not specify the duration.
    max-lease-time : Maximum number of seconds allowed for a lease.

3. subnet-declaration

The subnet declaration includes a range of IP addresses that a DHCP server can assign to clients. You can specify multiple subnets here. The subnets can be declared within braces ({}) and we can also specify other parameters to the specified subnet. The parameters defined outside the braces apply globally to all the clients.
Additional DHCP server declarations

1. host declarations for static IP address assignment
To provide a static IP address to a specific client server, use the host declaration and include the MAC address of the client and static IP address to be assigned to that host. For example :

host server01 {
	hardware ethernet    00:14:3G:00:12:01;
	fixed-address        192.168.1.101;
	max-lease-time       84600; 
}

2. Shared network declaration
– Declare all the subnets that share the same physical network within a shared-network declaration.
– Parameters within the shared network, but outside the enclosed subnet declarations, are considered to be global parameters. For example (here the routers parameters apply to both the subnets):

shared-network [name] {
	option routers 192.168.0.254
	subnet 192.168.1.0 netmast 255.255.252.0 {
		range 192.168.1.200 192.168.1.254;
	}
	subnet 192.168.2.0 netmast 255.255.252.0 {
		range 192.168.2.200 192.168.2.254;
	}
}

3. Group Declaration
Use the group declaration to apply global parameter to a group of declarations. Shared networks, subnets, and hosts can be grouped together. For example :

group {
	option routers 192.168.1.254;
	host server01 {
		hardware ethernet    00:14:3G:00:12:01;
		fixed-address        192.168.1.101;
	}
	subnet 192.168.1.0 netmast 255.255.252.0 {
		range 192.168.1.200 192.168.1.254;
	}
}

Filed Under: Linux
Some more articles you might also be interested in …

    How to configure and Manage Network Connections using nmcli
    How to send Audit Logs to Remote Rsyslog Server in CentOS/RHEL 6,7
    How to Password Protect GRUB2 in Oracle Enterprise Linux 7
    How to configure iSCSI Initiator (client) in CentOS / RHEL 7
    How to Resize / Expand a Btrfs Volume / Filesystem
    Installing CentOS / RHEL 7 (step by step with screen shots)
    mke2fs Command Examples in Linux
    How to add words to the dictionary cracklib uses for validating passwords against known dictionary words
    The System Continuously Displayed the Error Message from the “avahi-demon” in /var/log/messages
    CentOS / RHEL 7 : Enable NTP to start at boot after fresh install (disable chrony)

You May Also Like
Primary Sidebar
Search this website
Recent Posts

    apt Command Examples in Linux
    dpkg Command Examples in Linux
    whois Command Examples in Linux
    whois: command not found

© 2022 · The Geek Diary

    Archives Contact Us Copyright 

